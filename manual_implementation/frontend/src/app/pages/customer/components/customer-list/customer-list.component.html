<p-table 
  [value]="customers" 
  [lazy]="true" 
  [paginator]="true" 
  [rows]="rows"
  [totalRecords]="totalItems" 
  [loading]="loading"
  [rowsPerPageOptions]="rowsPerPageOptions"
  [first]="first"
  (onLazyLoad)="onLazyLoad($event)"
  styleClass="p-datatable-gridlines p-datatable-sm"
  [tableStyle]="{'min-width': '50rem'}">
  
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="photo">Photo</th>
      <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
      <th pSortableColumn="email">Email <p-sortIcon field="email"></p-sortIcon></th>
      <th pSortableColumn="phoneNumber">Phone <p-sortIcon field="phoneNumber"></p-sortIcon></th>
      <th pSortableColumn="address">Address <p-sortIcon field="address"></p-sortIcon></th>
      <th>Actions</th>
    </tr>
  </ng-template>
  
  <ng-template pTemplate="body" let-customer>
    <tr>
      <td>
        <img
            [src]="customer.photo | imageUrl"
            [alt]="customer.photo"
            width="32" style="vertical-align: middle"
        />
      </td>
      <td>{{customer.name}}</td>
      <td>{{customer.email}}</td>
      <td>{{customer.phoneNumber || 'N/A'}}</td>
      <td>{{customer.address || 'N/A'}}</td>
      <td>
        <div class="flex gap-2">
          <p-button 
            pButton 
            pRipple 
            icon="pi pi-eye" 
            class="p-button-rounded p-button-text" 
            (click)="onView(customer._id)"
            pTooltip="View"
            tooltipPosition="top">
          </p-button>
          <p-button 
            pButton 
            pRipple 
            icon="pi pi-pencil" 
            class="p-button-rounded p-button-text p-button-warning" 
            (click)="onEdit(customer._id)"
            severity="warn"
            pTooltip="Edit"
            tooltipPosition="top">
          </p-button>
          <p-button 
            pButton 
            pRipple 
            icon="pi pi-trash" 
            class="p-button-rounded p-button-text p-button-danger" 
            severity="danger"
            (click)="onDelete(customer._id)"
            pTooltip="Delete"
            tooltipPosition="top">
          </p-button>
        </div>
      </td>
    </tr>
  </ng-template>
  
  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="5" class="text-center">No customers found</td>
    </tr>
  </ng-template>
</p-table>
